[
    {
        "description": "Rook captures bishop for trade",
        "context": {
            "position": "1k2r3/4Bppp/8/p2R4/4n2P/5B2/r4PP1/2R3K1 b - - 0 27",
            "evaluation": {
                "move": {
                    "from": "e8",
                    "to": "e7"
                },
                "followup": "c1b1 b8c8 b1e1 a2a4 f3d1 a4b4 d5a5 e7b7 d1g4 c8b8 a5e5 e4f6"
            },
            "prevEvaluation": {
                "move": {
                    "from": "e7",
                    "to": "g5"
                },
                "followup": "e4g5 f3d5 g5h3 g2h3 a2b2 d7f7 e8c8 c1e1"
            },
            "prevMove": {
                "color": "b",
                "from": "d7",
                "to": "d5",
                "piece": "r",
                "captured": "b",
                "flags": "c",
                "san": "Rxd5",
                "lan": "d7d5",
                "before": "1k2r3/3RBppp/8/p2b4/4n2P/5B2/r4PP1/2R3K1 w - - 0 1",
                "after": "1k2r3/4Bppp/8/p2R4/4n2P/5B2/r4PP1/2R3K1 b - - 0 1"
            },
            "prevPosition": "1k2r3/3RBppp/8/p2b4/4n2P/5B2/r4PP1/2R3K1 w - - 0 1"
        },
        "expected": false
    },
    {
        "description": "Opponent hangs a bishop in one move",
        "context": {
            "position": "3r4/5pk1/p3b2p/1pb1P1p1/2p1N1p1/P7/1P2KPP1/2B4R w - - 2 33",
            "prevEvaluation": {
                "move": {
                    "from": "c5",
                    "to": "d4"
                },
                "followup": "c1g5 h6g5 h1h5 c8d8 h5g5 g7f8 e4d6 a6a5 g5h5"
            },
            "evaluation": {
                "move": {
                    "from": "e4",
                    "to": "c5"
                },
                "followup": "d8d5 c1e3 d5e5 h1d1 h6h5 e2f1 g7g6 d1d8 c4c3 b2c3 e6c4 f1g1"
            },
            "prevMove": {
                "color": "b",
                "from": "c8",
                "to": "d8",
                "piece": "r",
                "flags": "r",
                "san": "Rd8",
                "lan": "c8d8",
                "before": "2r5/5pk1/p3b2p/1pb1P1p1/2p1N1p1/P7/1P2KPP1/2B4R b - - 0 1",
                "after": "3r4/5pk1/p3b2p/1pb1P1p1/2p1N1p1/P7/1P2KPP1/2B4R w - - 0 1"
            },
            "prevPosition": "2r5/5pk1/p3b2p/1pb1P1p1/2p1N1p1/P7/1P2KPP1/2B4R b - - 0 1"
        },
        "expected": true
    },
    {
        "description": "After trades, wins a piece that was already lost",
        "context": {
            "position": "4k2r/4bpp1/1q5p/1n6/2PP1n2/4Nb2/3B1PPP/1Q3RK1 w k - 0 22",
            "evaluation": {
                "move": {
                    "from": "g2",
                    "to": "f3"
                },
                "followup": "e8g8 c4b5 b6d4 b1e4 f4h3 g1g2 h3f4 g2h1 d4d2 e4e7 f4e6 b5b6"
            },
            "prevPosition": "b3k2r/4bpp1/1q5p/1n6/2PP1n2/4NN2/3B1PPP/1Q3RK1 b k - 0 21",
            "prevMove": {
                "from": "a8",
                "to": "f3",
                "captured": "n"
            },

            "prevEvaluation": {
                "move": {
                    "from": "f4",
                    "to": "g2"
                },
                "followup": "d4d5 g2e3 d2e3 b6b7 b1b5 b7b5 c4b5 e8g8 f3e5 a8d5 f1d1 d5a8"
            }
        },
        "expected": false
    },
    {
        "description": "Rook move blunders pawn in one move",
        "context": {
            "position": "r4rk1/1p2bppp/1q2p1n1/1N1pP3/P1nP4/3QBN2/5PPP/1R3RK1 b - - 4 17",
            "prevMove": {
                "color": "w",
                "from": "a1",
                "to": "b1",
                "piece": "r",
                "flags": "n",
                "san": "Rab1",
                "lan": "a1b1",
                "before": "r4rk1/1p2bppp/1q2p1n1/1N1pP3/P1nP4/3QBN2/5PPP/R4RK1 w - - 3 17",
                "after": "r4rk1/1p2bppp/1q2p1n1/1N1pP3/P1nP4/3QBN2/5PPP/1R3RK1 b - - 4 17"
            },
            "evaluation": {
                "eval": "-1.39",
                "type": "cp",
                "move": {
                    "from": "a8",
                    "to": "a4"
                },
                "followup": "b5c3 a4b4 b1b4 b6b4 g2g3 b4a3"
            },
            "prevPosition": "r4rk1/1p2bppp/1q2p1n1/1N1pP3/P1nP4/3QBN2/5PPP/R4RK1 w - - 3 17",
            "prevEvaluation": {
                "eval": "0.12",
                "type": "cp",
                "move": {
                    "from": "f1",
                    "to": "b1"
                },
                "followup": "b6c6 g2g3 a8a5 f3d2 f8c8 d2c4 d5c4 d3c2"
            }
        },
        "expected": false
    },
    {
        "description": "Rook sacrifices exchange. Capture of rook should not be 'free'",
        "context": {
            "position": "r5k1/5ppp/4p1n1/q2pP3/1R1P4/4P2P/2rN2P1/2N1QRK1 b - - 0 29",
            "prevMove": {
                "color": "w",
                "from": "b3",
                "to": "b4",
                "piece": "r",
                "captured": "b",
                "flags": "c",
                "san": "Rxb4",
                "lan": "b3b4",
                "before": "r5k1/5ppp/4p1n1/q2pP3/1b1P4/1R2P2P/2rN2P1/2N1QRK1 w - - 3 29",
                "after": "r5k1/5ppp/4p1n1/q2pP3/1R1P4/4P2P/2rN2P1/2N1QRK1 b - - 0 29"
            },
            "evaluation": {
                "eval": "-3.47",
                "type": "cp",
                "move": {
                    "from": "a5",
                    "to": "b4"
                },
                "followup": "c1b3 c2b2 e1d1 a8f8 b3c5 b4d2 d1d2"
            },
            "prevPosition": "r5k1/5ppp/4p1n1/q2pP3/1b1P4/1R2P2P/2rN2P1/2N1QRK1 w - - 3 29",
            "prevEvaluation": {
                "eval": "-2.67",
                "type": "cp",
                "move": {
                    "from": "e1",
                    "to": "f2"
                },
                "followup": "b4d2 f2f7 g8h8 b3b7 d2e3 g1h2 e3h6 c1b3 a5d8"
            }
        },
        "expected": false
    },
    {
        "description": "Rook sacrifices exchange. Even though it is a bad move it is not free",
        "context": {
            "position": "3r4/pp4p1/2p3k1/6Np/1n1P4/4r1P1/PPPK3P/R3R3 w - - 0 21",
            "prevMove": {
                "color": "b",
                "from": "e8",
                "to": "e3",
                "piece": "r",
                "captured": "b",
                "flags": "c",
                "san": "Rxe3",
                "lan": "e8e3",
                "before": "3rr3/pp4p1/2p3k1/6Np/1n1P4/4B1P1/PPPK3P/R3R3 b - - 4 20",
                "after": "3r4/pp4p1/2p3k1/6Np/1n1P4/4r1P1/PPPK3P/R3R3 w - - 0 21"
            },
            "evaluation": {
                "eval": "4.45",
                "type": "cp",
                "move": {
                    "from": "e1",
                    "to": "e3"
                },
                "followup": "d8d4 d2c3 c6c5 e3e5 d4g4 g5e4 b7b6 e4c5 b4c2"
            },
            "prevPosition": "3rr3/pp4p1/2p3k1/6Np/1n1P4/4B1P1/PPPK3P/R3R3 b - - 4 20",
            "prevEvaluation": {
                "eval": "4.38",
                "type": "cp",
                "move": {
                    "from": "e8",
                    "to": "e3"
                },
                "followup": "e1e3 d8d4 d2c3 c6c5 e3e5 b4d5 e5d5 d4d5 g5f3 g6f5 f3g1 f5g4"
            }
        },
        "expected": false
    }
]
