[
    {
        "description": "Rook captures bishop for trade",
        "context": {
            "position": "1k2r3/4Bppp/8/p2R4/4n2P/5B2/r4PP1/2R3K1 b - - 0 27",
            "evaluation": {
                "move": {
                    "from": "e8",
                    "to": "e7"
                },
                "followup": "c1b1 b8c8 b1e1 a2a4 f3d1 a4b4 d5a5 e7b7 d1g4 c8b8 a5e5 e4f6"
            },
            "prevEvaluation": {
                "move": {
                    "from": "e7",
                    "to": "g5"
                },
                "followup": "e4g5 f3d5 g5h3 g2h3 a2b2 d7f7 e8c8 c1e1"
            },
            "prevMove": {
                "color": "b",
                "from": "d7",
                "to": "d5",
                "piece": "r",
                "captured": "b",
                "flags": "c",
                "san": "Rxd5",
                "lan": "d7d5",
                "before": "1k2r3/3RBppp/8/p2b4/4n2P/5B2/r4PP1/2R3K1 w - - 0 1",
                "after": "1k2r3/4Bppp/8/p2R4/4n2P/5B2/r4PP1/2R3K1 b - - 0 1"
            },
            "prevPosition": "1k2r3/3RBppp/8/p2b4/4n2P/5B2/r4PP1/2R3K1 w - - 0 1"
        },
        "expected": false
    },
    {
        "description": "Opponent hangs a bishop in one move",
        "context": {
            "position": "3r4/5pk1/p3b2p/1pb1P1p1/2p1N1p1/P7/1P2KPP1/2B4R w - - 2 33",
            "prevEvaluation": {
                "move": {
                    "from": "c5",
                    "to": "d4"
                },
                "followup": "c1g5 h6g5 h1h5 c8d8 h5g5 g7f8 e4d6 a6a5 g5h5"
            },
            "evaluation": {
                "move": {
                    "from": "e4",
                    "to": "c5"
                },
                "followup": "d8d5 c1e3 d5e5 h1d1 h6h5 e2f1 g7g6 d1d8 c4c3 b2c3 e6c4 f1g1"
            },
            "prevMove": {
                "color": "b",
                "from": "c8",
                "to": "d8",
                "piece": "r",
                "flags": "r",
                "san": "Rd8",
                "lan": "c8d8",
                "before": "2r5/5pk1/p3b2p/1pb1P1p1/2p1N1p1/P7/1P2KPP1/2B4R b - - 0 1",
                "after": "3r4/5pk1/p3b2p/1pb1P1p1/2p1N1p1/P7/1P2KPP1/2B4R w - - 0 1"
            },
            "prevPosition": "2r5/5pk1/p3b2p/1pb1P1p1/2p1N1p1/P7/1P2KPP1/2B4R b - - 0 1"
        },
        "expected": true
    },
    {
        "description": "Winning a pawn after a bishop trade is not a free bishop",
        "context": {
            "position": "r5k1/q3bppp/4p1n1/2NpP3/2nP4/r3BN1P/4QPP1/1R3RK1 b - - 0 22",
            "evaluation": {
                "eval": "-2.06",
                "type": "cp",
                "move": {
                    "from": "e7",
                    "to": "c5"
                },
                "followup": "d4c5 c4e3 f2e3 a7c5 f3g5 a3e3 e2f2 a8f8 b1c1 c5a7 c1a1 a7b6"
            },
            "prevPosition": "r5k1/q3bppp/4p1n1/2NpP3/2nP4/r3BN2/4QPPP/1R3RK1 w - - 5 22",
            "prevMove": {
                "from": "a6",
                "to": "a7"
            },
            "prevEvaluation": {
                "move": {
                    "from": "c5",
                    "to": "d3"
                },
                "followup": "a3a2 e2d1 h7h6 g2g3 e7d8 d3b4 a2a4 b4c6 a7d7 c6d8 d7d8 g1g2"
            }
        },
        "expected": false
    },
    {
        "description": "After trades, wins a piece that was already lost",
        "context": {
            "position": "4k2r/4bpp1/1q5p/1n6/2PP1n2/4Nb2/3B1PPP/1Q3RK1 w k - 0 22",
            "evaluation": {
                "move": {
                    "from": "g2",
                    "to": "f3"
                },
                "followup": "e8g8 c4b5 b6d4 b1e4 f4h3 g1g2 h3f4 g2h1 d4d2 e4e7 f4e6 b5b6"
            },
            "prevPosition": "b3k2r/4bpp1/1q5p/1n6/2PP1n2/4NN2/3B1PPP/1Q3RK1 b k - 0 21",
            "prevMove": {
                "from": "a8",
                "to": "f3",
                "captured": "n"
            },

            "prevEvaluation": {
                "move": {
                    "from": "f4",
                    "to": "g2"
                },
                "followup": "d4d5 g2e3 d2e3 b6b7 b1b5 b7b5 c4b5 e8g8 f3e5 a8d5 f1d1 d5a8"
            }
        },
        "expected": false,
        "debug": true
    }
]
