[
    {
        "description": "knight forks king and rook",
        "context": {
            "position": "8/4r1k1/8/8/8/2PPN3/1PK5/8 w - - 0 1",
            "evaluation": {
                "move": { "from": "e3", "to": "f5" },
                "followup": "g7f6 f5e7 f6e6 c2b3 e6d6 b3c4 d6e7 c4d5"
            }
        },
        "expected": false
    },
    {
        "description": "rook pins pawn to rook preventing PxB and winning pawn",
        "context": {
            "position": "2r3k1/pp2pp1p/4b1p1/3P4/8/1P3P2/P2R1KPP/2r2B1R b - - 0 19",
            "evaluation": {
                "move": { "from": "c8", "to": "d8" },
                "followup": "f2e3 d8d5 f1c4 c1c3 d2d3 d5d3 c4d3 e6f5"
            }
        },
        "expected": true
    },
    {
        "description": "rook recaptures queen",
        "context": {
            "position": "3r2k1/5bpp/pp3p2/2pPr3/P3P1PN/1P2R2P/5PK1/2R5 w - - 0 35",
            "evaluation": {
                "move": { "from": "h4", "to": "f3" },
                "followup": "e5e7 a4a5 g7g6 a5b6 f6f5 e4f5 e7b7 f5g6"
            }
        },
        "expected": false
    },
    {
        "description": "rook 'pins' pawn to rook but pawn can't move anyways and doesn't win material",
        "context": {
            "position": "6k1/p3pp1p/r5p1/3P4/6PP/5P2/1K6/3R4 b - - 30",
            "evaluation": {
                "move": { "from": "a6", "to": "d6" },
                "followup": "d1a1 d6d5 a1a7 g8f8 b2c2 d5d4 h4h5 g6h5"
            }
        },
        "expected": false
    },
    {
        "description": "rooks pins pawn to rook, preventing PxB",
        "context": {
            "position": "2r3k1/pp2pp1p/4b1p1/3P4/8/1P3P2/P2R1KPP/2r2B1R b - - 0 19",
            "evaluation": {
                "move": { "from": "c8", "to": "d8" },
                "followup": "f2e3 d8d5 f1c4 c1c3 d2d3 d5d3 c4d3 e6f5"
            }
        },
        "expected": true
    },
    {
        "description": "queen recaptures knight, fake pin between pawn and rook",
        "context": {
            "position": "r1bqk2r/1p3ppp/pn2p3/8/2BN4/1Q6/PP1B1PPP/R3K2R b KQkq - 0 13",
            "evaluation": {
                "move": { "from": "d8", "to": "d4" },
                "followup": "c4e2 b6d5 a1d1 e8g8 e1g1 b7b5 e2f3 c8b7"
            }
        },
        "expected": false
    },
    {
        "description": "bishop pins and wins knight to king",
        "context": {
            "position": "rn3rk1/pp2p1bp/1qp1n1p1/4P3/3p1P2/P1NB1Q1P/1PP2BP1/1R3R1K w - - 0 18",
            "evaluation": {
                "move": { "from": "d3", "to": "c4" },
                "followup": "g8h8 c4e6 c6c5 e6c4 d4c3 b2c3 b8c6 b1b6"
            }
        },
        "expected": true
    },
    {
        "description": "pawn recapture marked as queen pin in earlier version",
        "context": {
            "position": "rn3bk1/pp2p2p/2p3p1/3qP3/N2B2Q1/P2n3P/1PP3P1/5R1K w - - 2 23",
            "evaluation": {
                "move": { "from": "c2", "to": "d3" },
                "followup": "b8a6 a4c3 d5d8 e5e6 d8d6 f1f7 a6c5 g4h4"
            }
        },
        "expected": false
    },
    {
        "description": "bishop develops to pinning square and trades equal material",
        "context": {
            "position": "r2qkb1r/pp2pp1p/1nb3p1/4N3/3P4/7P/PP3PP1/RNBQ1RK1 b kq - 1 12",
            "evaluation": {
                "move": { "from": "f8", "to": "g7" },
                "followup": "b1c3 e8g8 f1e1 a8c8 c1g5 f8e8 a1c1 c6d5"
            }
        },
        "expected": false
    },
    {
        "description": "rook pins bishop to rook and wins material",
        "context": {
            "position": "1r4k1/2q1pp1p/4b1p1/p1pB4/2Q5/P6P/5PP1/3R2K1 b - - 3 29",
            "evaluation": {
                "move": { "from": "b8", "to": "d8" },
                "followup": "h3h4 c7e5 c4c5 d8d5 d1d5 e5d5 c5e7 h7h6"
            }
        },
        "expected": true
    },
    {
        "description": "Queen pins knight to rook and bishop to king winning the rook",
        "context": {
            "position": "rn3bk1/pp2p2p/2p3p1/3qP3/N2B2Q1/P2n3P/1PP3P1/5R1K w - - 2 23",
            "evaluation": {
                "move": { "from": "g4", "to": "c8" },
                "followup": "b8d7 c8a8 d5d4 c2d3 d4d3 f1a1 b7b5 a4c3"
            }
        },
        "expected": true
    },
    {
        "description": "bishop captures knight, pinning pawn to rook and winning pawn in the tactical followup. But the bishop is capturable by that pawn so this should not be a cosmetic pin",
        "context": {
            "position": "r1b2r1k/1ppnb1pp/p1n1Q3/1Bq5/8/P1N2N1P/1P3PP1/R1B2RK1 w - - 1 16",
            "evaluation": {
                "move": { "from": "b5", "to": "c6" },
                "followup": "d7b8 c3e4 c8e6 e4c5 e7c5 c6b7 a8a7 b7e4"
            }
        },
        "expected": false
    },
    {
        "description": "Queen recaptures, no followup pin",
        "context": {
            "position": "r1bqr1k1/pp3pbp/2p3p1/3Nn3/8/4PN2/PP1BBPPP/2RQ1RK1 b - - 0 12",
            "evaluation": {
                "move": { "from": "d8", "to": "d5" },
                "followup": "f3e5 g7e5 d2c3 d5a2 c3e5 e8e5 d1d8 g8g7 e2g4 a2a5 d8d4 g7g8"
            }
        },
        "expected": false
    },
    {
        "id": "00EJb",
        "description": "Rook pins queen to king, then after checks captures the queen with check",
        "context": {
            "position": "6k1/5pp1/2R1p2p/8/P1B5/1P4P1/1q3QKP/3r4 b - - 2 35",
            "evaluation": {
                "move": "d1d2",
                "followup": ["c6c8", "g8h7", "c4d3", "f7f5", "c8c2", "d2f2"]
            }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "description": "Bishop moves backwards to 'pin' pawn it was already attacking",
        "context": {
            "position": "r2r2k1/pp3p1p/1qn3p1/5b2/3b4/Q4NP1/PP2PPBP/R1B2RK1 b - - 2 14",
            "evaluation": {
                "move": {
                    "from": "d4",
                    "to": "g7"
                },
                "followup": "c1e3 b6b2 a3b2 g7b2 a1d1 a7a5 a2a4 b2g7 d1d2 a8c8 f1c1 d8d2"
            }
        },
        "expected": false
    },
    {
        "description": "Rook attacks pawn behind king, indirectly captures bishop",
        "context": {
            "position": "b2r3r/4Rp1p/p2q1np1/1p1P4/kP1Q4/P4PPB/2P4P/1K6 w - - 1 28",
            "evaluation": {
                "move": {
                    "from": "e7",
                    "to": "a7"
                },
                "followup": "a8b7 a7b7 d6d5 b7b6 a6a5 b6a6 d8a8 d4e3 a8a6"
            }
        },
        "expected": false
    },
    {
        "description": "Queen cosmetically pins knight to defended rook but captures never happen",
        "context": {
            "position": "b2r3r/4Rp1p/pk1q1np1/Np1P4/3p1Q2/P4PPB/1PP4P/1K6 w - - 2 26",
            "evaluation": {
                "move": {
                    "from": "f4",
                    "to": "d4"
                },
                "followup": "b6a5 b2b4 a5a4 e7a7 a8b7 a7b7 h8e8 b7b6 f6d5 b6d6 d8d6 h3f1"
            }
        },
        "expected": false
    },
    {
        "description": "Rook attacks pawn behind king, material is won but not due to the cosmetic pin",
        "context": {
            "position": "b2r3r/4Rp1p/p4np1/1p1q4/kP6/P1Q2PPB/2P4P/1K6 w - - 0 29",
            "evaluation": {
                "move": {
                    "from": "e7",
                    "to": "a7"
                },
                "followup": "a8b7 a7b7 d5c4 c3f6 a4a3 f6a6 a3b4 h3d7 d8d7 b7d7 h8c8 a6d6"
            }
        },
        "expected": false,
        "debug": true
    }
]
