[
    {
        "description": "pawn move indirectly traps bishop",
        "context": {
            "position": "8/1b1r2p1/pk2p3/3pPp1p/3R1P2/bP4R1/P1P3P1/1K6 w - - 0 1",
            "evaluation": {
                "move": { "from": "b3", "to": "b4" },
                "followup": "a3b4 d4b4 b6c5 g3b3 b7c6 b4b8 d5d4 g2g3"
            }
        },
        "expected": true
    },
    {
        "description": "pawn push traps knight in alapin sicilian",
        "context": {
            "position": "rnbqkb1r/pp1ppppp/8/2p1P3/4n3/2P5/PP1P1PPP/RNBQKBNR w - - 0 1",
            "evaluation": {
                "move": { "from": "d2", "to": "d3" },
                "followup": "e4f2 e1f2 b8c6 g1f3 d7d5 f1e2 c8g4 h1e1"
            }
        },
        "expected": true
    },
    {
        "description": "Bishop move traps queen on a6",
        "context": {
            "position": "1r6/5pk1/Q3bpPp/p1q5/6P1/1PP2P2/PKR5/8 b - - 0 28",
            "evaluation": {
                "move": { "from": "e6", "to": "c4" },
                "followup": "a6c4 c5c4 g6f7 c4f7 c2e2 a5a4 f3f4 b8b7 c3c4 f7d7 f4f5 a4b3"
            }
        },
        "expected": true
    },
    {
        "description": "Pawn push traps bishop",
        "context": {
            "position": "7r/p5p1/1pp1pk2/3bNp2/P2PnP2/2P1K2P/2PB2P1/R7 w - - 9 28",
            "evaluation": {
                "move": { "from": "c3", "to": "c4" },
                "followup": "c6c5 c4d5 c5d4 e3d3 h8c8 d5d6 e4d6 h3h4 d6e4 d2e1 g7g6 a4a5"
            }
        },
        "expected": true
    },
    {
        "description": "Rook move attacks queen but does not trap it",
        "context": {
            "position": "2r1k2r/pp1bbpp1/4p1p1/3pP3/2nN1B2/1NP5/qP3PPP/1R1QR1K1 w k - 0 17",
            "evaluation": {
                "move": { "from": "b1", "to": "a1" },
                "followup": "a2b2 d4e2 e8g8 f4c1 b2a1 b3a1 c4e5 a1c2 e5c4 h2h4 e7h4 d1d4"
            }
        },
        "expected": false
    },
    {
        "description": "Current implentation wants to sacrifice queen for knight",
        "context": {
            "position": "3r1rk1/pp1qbppp/8/2pN1b2/2P2Pn1/3P1R2/PP2B1PP/R1B2Q1K b - - 7 15",
            "evaluation": {
                "move": { "from": "h7", "to": "h5" },
                "followup": "h2h3 g4h6 f3e3 e7d6 e3g3 d6e7 c1e3 f5e6 d5e7 d7e7 g3g5 h6f5"
            }
        },
        "expected": false
    },
    {
        "description": "Same as above, thinks this is a queen trap",
        "context": {
            "position": "3r2k1/pp3ppp/5b2/2pP1q2/5PB1/3P2R1/PP4QK/R1B1r3 b - - 7 23",
            "evaluation": {
                "move": { "from": "f5", "to": "d5" },
                "followup": "g3e3 e1e3 g2d5 d8d5 c1e3 d5d3 a1e1 h7h5 g4f5 d3d8 e3c5 g7g6"
            }
        },
        "expected": false
    },
    {
        "description": "Pawn push traps queen",
        "context": {
            "position": "3r2k1/pp3ppp/5bq1/2pP4/5PB1/3P2R1/PP4QK/R1B1r3 w - - 8 24",
            "evaluation": {
                "move": { "from": "f4", "to": "f5" },
                "followup": "g6g4 g3g4 d8e8 h2h3 g8f8 g4e4 e8e4 d3e4 c5c4 c1f4 e1a1 e4e5"
            }
        },
        "expected": true
    },
    {
        "description": "King cannot be a 'trapped' piece",
        "context": {
            "position": "3r1k2/pp3Ppp/4Bb2/2pP4/8/3P3R/PP4QK/1r6 b - - 4 28",
            "evaluation": {
                "move": { "from": "f6", "to": "e5" },
                "followup": "h3g3 b1b2 g2b2 e5b2 h2h3 b2e5 g3g5 e5f6 g5h5 h7h6 a2a4"
            }
        },
        "expected": false
    },
    {
        "description": "Pawn recapture while knight is pinned",
        "context": {
            "position": "r1bqk2r/pp2ppbp/2np1np1/1B6/3pP3/2P2N2/PP3PPP/RNBQR1K1 w kq - 0 8",
            "evaluation": {
                "move": { "from": "c3", "to": "d4" },
                "followup": "a7a6 b5c6 b7c6 h2h3 e8g8 b1c3 a8b8 b2b3 f6d7 c1g5 h7h6 g5e3"
            }
        },
        "expected": false
    },
    {
        "description": "Queen recaptures bishop. Rook is defended",
        "context": {
            "position": "r2qk2r/pbpp1ppp/1b6/3Qp3/8/2P2N2/PP2KnPP/RNB2B1R w kq - 0 10",
            "evaluation": {
                "move": { "from": "d5", "to": "b7" },
                "followup": "f2h1 b7e4 e8g8 f3g5 f7f5 e4d5 g8h8 g2g3 d8f6 d5h1 f5f4 g3f4"
            }
        },
        "expected": false
    },
    {
        "description": "Queen captures pawn with check",
        "context": {
            "position": "r1b2rk1/pp4bp/2p1p1p1/3pPP1n/3P3q/3B1Q1P/PPPN2P1/R1B2RK1 b - - 0 13",
            "evaluation": {
                "move": { "from": "h4", "to": "d4" },
                "followup": "f3f2 d4f2 f1f2 e6f5 d2f3 f8e8 c2c3 c8d7 c1e3 h5g3"
            }
        },
        "expected": false
    },
    {
        "description": "Rook recaptures queen, bishop is defended",
        "context": {
            "position": "r1bq1k1r/pp6/4p1Bb/2p2p1p/2P5/5NP1/P4P1P/1R1R2K1 w - - 0 25",
            "evaluation": {
                "move": { "from": "d1", "to": "d8" },
                "followup": "f8g7 d8h8 g7h8 b1d1 b7b5 c4b5 c5c4 f3e5 c4c3 f2f4 c8b7 d1c1"
            }
        },
        "expected": false
    },
    {
        "description": "Pinned knight is not trapped",
        "context": {
            "position": "2r1k2r/p3ppbp/3pbnp1/qp6/2PQP3/1PN1BP2/P5PP/2R1KB1R b Kk - 1 13",
            "evaluation": {
                "move": { "from": "e8", "to": "g8" },
                "followup": "d4a7 a5a7 e3a7 b5c4 b3c4 g7h6 c1c2 e6c4 a7d4 e7e5 d4f2 c4a2"
            }
        },
        "expected": false
    },
    {
        "description": "Knight blocks check while my knight is hanging",
        "context": {
            "position": "2R3k1/p4pp1/4n2p/8/8/5QPP/q2N2K1/8 b - - 1 47",
            "evaluation": {
                "move": { "from": "e6", "to": "f8" },
                "followup": "f3e3 h6h5 g2f2"
            }
        },
        "expected": false
    },
    {
        "description": "Queen traps rook and forces exchange sac",
        "context": {
            "position": "r2q1rk1/pRb2ppp/1n2p3/3n4/P2P4/5N2/2QBBPPP/3R2K1 b - - 0 19",
            "evaluation": {
                "move": { "from": "d8", "to": "c8" },
                "followup": "b7c7 c8c7 c2c7 d5c7 a4a5 b6d5 f3e5 f8b8 g2g3 f7f6 e5d7 b8b2"
            }
        },
        "expected": true
    },
    {
        "id": "008nF",
        "description": "Rook move traps queen in the middle of the board",
        "context": {
            "position": "2rq1rk1/7p/1n4pb/1R2Q3/pPpP1P2/P1B5/3N2PP/2R3K1 b - - 0 31",
            "evaluation": { "move": "f8e8", "followup": ["e5e8", "d8e8"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "00BM8",
        "description": "Knight traps queen, queen sacrifices for knight",
        "context": {
            "position": "3r1rk1/pp2bppp/2ppnn2/8/N1P1P3/q1P4P/P2N2PB/R2Q1R1K w - - 1 17",
            "evaluation": { "move": "d2b1", "followup": ["a3a4", "d1a4"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "00DdW",
        "description": "Rook traps queen, queen moves to defended square for a better trade",
        "context": {
            "position": "5rk1/5ppp/4b3/1p1pPpPP/2pP4/b1P5/rqNQKP2/2RRN3 w - - 6 24",
            "evaluation": { "move": "c1b1", "followup": ["b2b3", "b1b3"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "00Ksa",
        "description": "King traps rook",
        "context": {
            "position": "8/5p2/5pk1/8/4PPr1/8/5K2/7R w - - 3 47",
            "evaluation": { "move": "f2f3", "followup": ["g4g5", "f4g5"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "01ctt",
        "description": "Bishop trade then pawn traps bishop",
        "context": {
            "position": "8/ppp1kpp1/3b2np/3p3b/3P1B2/2P4P/PPBN1PP1/5K2 w - - 1 24",
            "evaluation": { "move": "f4d6", "followup": ["e7d6", "g2g4", "g6f4", "g4h5"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "01gjE",
        "description": "First move is not forcing -- Bishop attacks queen, then next move other bishop traps queen in the corner",
        "context": {
            "position": "1Q2n1kr/B4ppp/q7/bb6/4p3/2P1P3/P3NPPP/RN2K2R b KQ - 0 21",
            "evaluation": { "move": "a5c7", "followup": ["b8a8", "b5c6", "a8c6", "a6c6"] }
        },
        "options": { "trimEndSequence": false },
        "expected": false
    },
    {
        "id": "01iqw",
        "description": "Bishop traps queen, queens are traded, resulting position wins a bishop",
        "context": {
            "position": "r3kb1r/1p4p1/p1p1bp2/4p1Bp/4P3/2NQ1PP1/PPP2qBP/R6K w kq - 0 17",
            "evaluation": { "move": "g5e3", "followup": ["e6c4", "e3f2", "c4d3", "c2d3"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "01jyS",
        "description": "Rook lift traps queen",
        "context": {
            "position": "r1b2rk1/pp3ppp/5n2/1N1p4/B7/7P/q4PP1/2RQR1K1 w - - 0 19",
            "evaluation": { "move": "e1e2", "followup": ["a2e2", "d1e2"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "01rBE",
        "description": "Bishop check forces king to cover queen's escape path, then knight traps",
        "context": {
            "position": "r1bqr3/ppp1k1pp/1b3n2/nP1pp1NP/4P3/2PP4/P4PP1/RNBQK2R w KQ - 0 12",
            "evaluation": { "move": "c1a3", "followup": ["e7d7", "g5f7", "d8e7", "a3e7"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "01sqg",
        "description": "Rook traps queen, bishop is sacrificed with check, then queen sacrifices itself for rook",
        "context": {
            "position": "4rr1k/pp4pp/2p1B3/2bnpP1q/8/2NP1R2/PPPB2QP/4K3 w - - 7 21",
            "evaluation": { "move": "f3h3", "followup": ["c5f2", "e1f2", "h5h3", "g2h3"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "01vxD",
        "description": "Bishop simple queen trap",
        "context": {
            "position": "Nn1q1r1k/pb6/1pp1Qp1p/2Pp2p1/3Pn3/P7/1P2PPPP/R3KBNR b KQ - 0 17",
            "evaluation": { "move": "b7c8", "followup": ["e6c8", "d8c8"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "025gx",
        "description": "Simple knight trap",
        "context": {
            "position": "5r1k/2b1Npp1/1p2p2p/1qn5/3Q4/P7/1R3PPP/3R2K1 b - - 1 26",
            "evaluation": { "move": "b5e8", "followup": ["e7d5", "e6d5"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "02f60",
        "description": "Queen trap, some checks and captures afterwards",
        "context": {
            "position": "5r2/3b2k1/3bpr1p/3p2pP/2pP1qP1/2P2B2/2Q1RRP1/5NK1 w - - 18 40",
            "evaluation": {
                "move": "g2g3",
                "followup": ["f4f3", "f2f3", "f6f3", "c2g6", "g7h8", "g6h6"]
            }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "02nYL",
        "description": "Queen trap desparados for rook",
        "context": {
            "position": "r2qk2r/1Q2bp1p/p1n1b3/3pPpp1/3P4/P1N2N2/1P3PPP/R1B2RK1 b kq - 0 13",
            "evaluation": { "move": "c6a5", "followup": ["b7a8", "d8a8"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "description": "Rook attacks queen. Engine sacrifices queen but queen does have escape squares",
        "context": {
            "position": "r1b2rk1/pp1pnpbp/4p1p1/2BP4/2B1P3/P1q2N2/5PPP/R2Q1RK1 w - - 0 13",
            "evaluation": {
                "move": {
                    "from": "a1",
                    "to": "c1"
                },
                "followup": "e7d5 e4d5 c3f6 c5f8 g7f8 d1a4 e6e5 c4e2 b7b6 h2h4 c8b7 a4d7"
            }
        },
        "expected": false,
        "debug": true
    }
]
