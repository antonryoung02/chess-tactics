[
    {
        "description": "knight forks king and rook",
        "context": {
            "position": "8/4r1k1/8/8/8/2PPN3/1PK5/8 w - - 0 1",
            "evaluation": {
                "eval": "5.6",
                "type": "cp",
                "move": { "from": "e3", "to": "f5" },
                "followup": "g7f6 f5e7 f6e6 c2b3 e6d6 b3c4 d6e7 c4d5"
            }
        },
        "expected": true
    },
    {
        "description": "pawn forks knight and bishop but pieces escape",
        "context": {
            "position": "8/6k1/8/3b1n2/8/4PP2/3PK3/3R4 w - - 0 1",
            "evaluation": {
                "eval": "3.5",
                "type": "cp",
                "move": { "from": "e3", "to": "e4" },
                "followup": "d5c4 d2d3 f5d4 e2e3 d4c2 e3d2 c4b3 d1g1"
            }
        },
        "expected": false
    },
    {
        "description": "bishop attacks king and rook but is captured",
        "context": {
            "position": "3k4/p7/8/r7/8/8/5B2/5KR1 w - - 0 1",
            "evaluation": {
                "eval": "-0.1",
                "type": "cp",
                "move": { "from": "f2", "to": "b6" },
                "followup": "a7b6 f1e2 a5d5 g1a1 d8d7 e2e3 b6b5 e3e4 d5c5"
            }
        },
        "expected": false
    },
    {
        "description": "knight forks king and pawn. KxB, NxP, then king moves and knight captures rook winning material",
        "context": {
            "position": "5r2/pp4kp/2p3p1/4n3/2P3P1/2NbK2P/PP2B3/3R4 b - - 5 23",
            "evaluation": {
                "eval": "-1.99",
                "type": "cp",
                "move": {
                    "from": "e5",
                    "to": "c4"
                },
                "followup": "e3d3 c4b2 d3e3 b2d1 e2d1 f8f1 h3h4 f1e1"
            }
        },
        "expected": true
    },
    {
        "description": "queen forks king and pawn to capture pawn on next move",
        "context": {
            "position": "r1bqk1nr/ppp2ppp/8/2b5/4p3/3P1N2/PP3PPP/RNBQKB1R w KQkq - 0 8",
            "evaluation": {
                "eval": "3.78",
                "type": "cp",
                "move": {
                    "from": "d1",
                    "to": "a4"
                },
                "followup": "c8d7 a4e4 g8e7 f1e2 c5b6 b1c3 d7c6 e4c4"
            }
        },
        "expected": true
    },
    {
        "description": "knight forks pawn and rook in losing position. gains 1pt material",
        "context": {
            "position": "3rr1k1/p5p1/1pp1p2p/2B1R3/3N4/7P/PPP3P1/2Kn4 w - - 0 26",
            "evaluation": {
                "eval": "-2.60",
                "type": "cp",
                "move": {
                    "from": "d4",
                    "to": "c6"
                },
                "followup": "b6c5 c6d8 e8d8 e5e6 c5c4 b2b3 c4c3 e6c6"
            }
        },
        "expected": true
    },
    {
        "description": "Protected rook forks queen and bishop",
        "context": {
            "position": "2r1r1k1/1p3ppp/p4b2/q4b2/2p2N2/P1P1BP2/1P1R1QPP/4R1K1 w - - 5 27",
            "evaluation": {
                "eval": "3.90",
                "type": "cp",
                "move": {
                    "from": "d2",
                    "to": "d5"
                },
                "followup": "a5a4 d5f5 f6e5 f4h5 a4c6 f2h4 h7h6 h4g4 g7g6 f5e5 e8e5 h5f6"
            }
        },
        "expected": true
    },
    {
        "description": "Queen forks king and rook on h4",
        "context": {
            "position": "2r3k1/5p1p/1q2bpp1/pp6/7R/1PPQ1P2/PK4PP/2R5 b - - 0 21",
            "evaluation": {
                "eval": "-4.59",
                "type": "cp",
                "move": {
                    "from": "b6",
                    "to": "f2"
                },
                "followup": "c1c2 f2h4 d3b5 h4e1 a2a4 e1d1 b5e2 d1d6 e2f2 d6h2 f3f4 h2h5"
            }
        },
        "expected": true
    },
    {
        "description": "Pawn forks queen and bishop",
        "context": {
            "position": "2r2rk1/pp1b2pp/4pp2/q1bpP3/3N1P2/P2QB3/1PP3PP/1R2R2K w - - 0 19",
            "evaluation": {
                "eval": "4.54",
                "type": "cp",
                "move": {
                    "from": "b2",
                    "to": "b4"
                },
                "followup": "a5a4 b4c5 f6e5 f4e5 c8c5 b1b7 c5c4 d3d2 c4d4 e3d4"
            }
        },
        "expected": true
    },
    {
        "description": "Pawn forks rook and bishop. Bishop desparados for pawn",
        "context": {
            "position": "1r6/8/7p/P2n4/3k2p1/2pp4/5KPP/2B1R3 b - - 0 39",
            "evaluation": {
                "eval": "-5.54",
                "type": "cp",
                "move": {
                    "from": "d3",
                    "to": "d2"
                },
                "followup": "e1d1 d4d3 a5a6 d5e3 d1d2 c3d2 c1d2 d3d2 h2h3 b8f8 f2g3 d2e2"
            }
        },
        "expected": true
    },
    {
        "id": "000rO",
        "description": "Bishop forks king and rook",
        "context": {
            "position": "3R4/8/8/KB2b3/1p6/1P2k3/3p4/8 b - - 0 58",
            "evaluation": { "move": "e5c7", "followup": ["a5b4", "c7d8"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "002IE",
        "description": "Pawn capture forks knight and queen",
        "context": {
            "position": "r3brk1/5pp1/p2qpn1p/P2pn3/2pP4/2P1PN2/5PPP/RB1QK2R w KQ - 0 17",
            "evaluation": { "move": "d4e5", "followup": ["d6e7", "e5f6"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "002Tf",
        "description": "Queen forks king, bishop, and pawn. Knight blocks check defending bishop. Queen captures pawn",
        "context": {
            "position": "r3kbnr/ppp1qppp/2n5/1B1pP3/5B2/4PQ2/PPP2PPP/RN2K2R b KQkq - 2 7",
            "evaluation": { "move": "e7b4", "followup": ["b1c3", "b4b2"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "00Feu",
        "description": "Bishop forks queen and rook",
        "context": {
            "position": "4Rrk1/p6p/1pp2rp1/8/5B1q/4QP1P/P1P2PK1/8 w - - 3 29",
            "evaluation": { "move": "f4g5", "followup": ["h4g5", "e3g5"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "00Gz6",
        "description": "Queen forks king, and knight but king moves to defend",
        "context": {
            "position": "r7/p4kp1/1p4p1/2qNn3/Q7/4PP2/PP3K2/6R1 w - - 1 26",
            "evaluation": { "move": "a4f4", "followup": ["f7e6", "f4e4", "a8f8", "g1g6"] }
        },
        "options": { "trimEndSequence": false },
        "expected": false
    },
    {
        "id": "00H2I",
        "description": "Queen forks king and bishop",
        "context": {
            "position": "4rrk1/ppp2pp1/7p/3n4/3P3q/1P2p2P/PB4P1/R2QRBK1 b - - 3 23",
            "evaluation": { "move": "h4f2", "followup": ["g1h2", "f2b2"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "00Hpe",
        "description": "Forced rook trade allows fork on next turn",
        "context": {
            "position": "1rr3k1/4Qppp/q3p3/p2pn3/3N4/4P2P/5PP1/RR4K1 w - - 0 30",
            "evaluation": { "move": "b1b8", "followup": ["c8b8", "e7c7", "b8c8", "c7e5"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "00IUT",
        "description": "Pawn forks Queen and Rook, pawn captures rook, queen trade",
        "context": {
            "position": "1r2r1k1/ppp1q1pp/4b3/4P3/1Q1R1P2/8/P5PP/R1B3K1 b - - 0 19",
            "evaluation": { "move": "c7c5", "followup": ["b4a3", "c5d4", "a3e7", "e8e7"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "00KNK",
        "description": "Initial knight fork, but advantage only realized after bishop fork on next turn",
        "context": {
            "position": "r3r1k1/p1p4p/3b4/6qN/4p3/1P1b1Q2/P2P1PP1/B5KR w - - 0 23",
            "evaluation": {
                "move": "h5f6",
                "followup": ["g8f8", "f6h7", "f8e7", "a1f6", "g5f6", "f3f6"]
            }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "00Kia",
        "description": "Queen attacks king and pawn, but material is won with discovery ",
        "context": {
            "position": "5r1k/4n2p/1p4p1/pP5Q/P2pB2K/6P1/2P4P/4q3 w - - 0 38",
            "evaluation": { "move": "h5e5", "followup": ["h8g8", "e4d5", "e7d5", "e5e1"] }
        },
        "options": { "trimEndSequence": false },
        "expected": false
    },
    {
        "id": "00LRv",
        "description": "Queen forks king and bishop, only captures bishop after intermezzo check",
        "context": {
            "position": "5r1k/7p/p2pB3/3Pb1p1/4pP1q/1P2B3/P1Q5/2R3K1 b - f3 0 31",
            "evaluation": { "move": "h4g3", "followup": ["g1h1", "g3f3", "c2g2", "f3e3"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "00LZf",
        "description": "Knight forks queen and rook but queen escapes with check",
        "context": {
            "position": "r1b1kb1r/pppp1ppp/2n1p3/4N3/3P2q1/4n3/PPP1BPPP/RN1Q1RK1 w kq - 0 9",
            "evaluation": { "move": "f2e3", "followup": ["g4g5", "e5f7", "g5e3", "g1h1"] }
        },
        "options": { "trimEndSequence": false },
        "expected": false
    },
    {
        "id": "00LZl",
        "description": "Knight trade, queen attacks bishop with check, knight returns to block and defend",
        "context": {
            "position": "r2qk2r/ppp2ppp/2n5/3pPb2/1b1n1B2/2NB1N2/PP3PPP/R2QK2R w KQkq - 4 10",
            "evaluation": { "move": "f3d4", "followup": ["c6d4", "d1a4", "d4c6", "d3f5"] }
        },
        "options": { "trimEndSequence": false },
        "expected": false
    },
    {
        "id": "00Lyc",
        "description": "Queen forks king and rook",
        "context": {
            "position": "4R3/1p4k1/1q3bpp/3B4/4Np1P/p4P2/3RK1P1/8 b - - 5 42",
            "evaluation": { "move": "b6b5", "followup": ["d2d3", "b5e8"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "00MwU",
        "description": "Sacrifice exchange to win rook with fork",
        "context": {
            "position": "3r1b1R/1pq3p1/p1k3P1/3p4/1P1Q4/4PP2/P1P5/2K5 w - - 0 27",
            "evaluation": { "move": "h8f8", "followup": ["d8f8", "d4c5", "c6d7", "c5f8"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "00NHK",
        "description": "Sacrifice rook, queen fork king and knight, then checkmate",
        "context": {
            "position": "r1b2rk1/1p2b1p1/pq2p1P1/3pn3/1P1P4/P1N1P3/6P1/R2QK2R w KQ - 0 18",
            "evaluation": { "move": "h1h8", "followup": ["g8h8", "d1h5", "h8g8", "h5h7"] }
        },
        "options": { "trimEndSequence": false },
        "expected": false
    },
    {
        "id": "00O9Z",
        "description": "Queen check sacrifice for mate",
        "context": {
            "position": "5Q1R/5p1p/1b3qp1/p6k/P2P4/8/1P2rPPP/5RK1 b - - 8 32",
            "evaluation": {
                "move": "f6f2",
                "followup": ["f1f2", "e2e1", "f2f1", "b6d4", "g1h1", "e1f1"]
            }
        },
        "options": { "trimEndSequence": false },
        "expected": false
    },
    {
        "id": "00OPc",
        "description": "Knight forks king and rook, queen sacrifices for knight, trades",
        "context": {
            "position": "1k1rr3/ppp1q3/8/4nQ1p/8/2P2N1P/PP4P1/2K1R2R b - - 1 25",
            "evaluation": { "move": "e5d3", "followup": ["f5d3", "d8d3", "e1e7", "e8e7"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "00Rue",
        "description": "Bishop for knight trade, then queen forks king and bishop",
        "context": {
            "position": "r2qkb1r/pp1nppp1/2p2n1p/3p1b2/2PP4/BP2PN2/P4PPP/RN1QKB1R b KQkq - 0 7",
            "evaluation": { "move": "f5b1", "followup": ["a1b1", "d8a5", "b3b4", "a5a3"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "00SCA",
        "description": "Rook check to force king onto forking square",
        "context": {
            "position": "8/2Q5/2p2nk1/4K3/2r5/8/8/8 b - - 5 71",
            "evaluation": { "move": "c4e4", "followup": ["e5d6", "f6e8", "d6d7", "e8c7"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "00SU7",
        "description": "Rook trade to put undefended rook on forking square",
        "context": {
            "position": "2rqr1k1/B2b1ppp/5n2/8/7Q/3B4/P1P2PPP/R3R1K1 b - - 4 22",
            "evaluation": { "move": "e8e1", "followup": ["a1e1", "d8a5", "e1a1", "a5a7"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "00TV2",
        "description": "Queen check to fork on next move",
        "context": {
            "position": "6k1/p1Q2p1p/4p1p1/3p4/1r6/7P/q4PP1/5RK1 w - - 0 27",
            "evaluation": { "move": "c7c8", "followup": ["g8g7", "c8c3", "d5d4", "c3b4"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "00Ty2",
        "description": "Rook skewer (rook does fork knight, but irrelevant), then deflection check, then queen capture",
        "context": {
            "position": "r5k1/ppp4p/2P3r1/8/4P3/B1P5/P1Q1K3/6N1 b - - 0 31",
            "evaluation": { "move": "g6g2", "followup": ["e2d3", "a8d8", "d3c4", "g2c2"] }
        },
        "options": { "trimEndSequence": false },
        "expected": false
    },
    {
        "id": "00UyQ",
        "description": "Rook trade then queen forks king and rook",
        "context": {
            "position": "4r1k1/p1Q2pp1/1p5p/4P3/5r1q/5R2/P3B1PP/R5K1 b - - 0 22",
            "evaluation": { "move": "f4f3", "followup": ["g2f3", "h4d4", "g1g2", "d4a1"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "01DBx",
        "description": "Queen forks rooks, opponent trades queens and then loses rook",
        "context": {
            "position": "3r2k1/1q4p1/p2p2p1/1pp5/6Q1/2P5/PP1r2PP/1R2R2K w - - 0 26",
            "evaluation": { "move": "g4g5", "followup": ["b7g2", "g5g2", "d2g2", "h1g2"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true
    },
    {
        "id": "01K6c",
        "description": "Bishop sacrifice then rook trade for positional advantage",
        "context": {
            "position": "1r2r1k1/Q1p3pp/6q1/2nb4/8/5P2/PPP3PP/RNB2RK1 b - - 0 19",
            "evaluation": { "move": "d5f3", "followup": ["f1f3", "e8e1", "f3f1", "e1f1"] }
        },
        "options": { "trimEndSequence": false },
        "expected": false
    },
    {
        "id": "01P1X",
        "description": "Knight sacrifice allows knight to fork king, rook, opponent loses queen",
        "context": {
            "position": "r1b2rk1/pp2ppbp/5np1/2qP4/1n2P3/P1N2N2/1P1B1PPP/R2QKB1R b KQ - 0 11",
            "evaluation": { "move": "f6e4", "followup": ["c3e4", "b4c2", "d1c2", "c5c2"] }
        },
        "options": { "trimEndSequence": false },
        "expected": true,
        "debug": true
    },
    {
        "description": "Knight forks king and rook on pinned square",
        "context": {
            "position": "8/1R3pkp/6pn/p1r5/1pN2NP1/1P3P2/P1n2K1P/8 w - - 6 35",
            "evaluation": {
                "move": {
                    "from": "f4",
                    "to": "e6"
                },
                "followup": "g7f6 e6c5 f6g5 f2g3 g5f6 c5e4 f6e6 c4a5 c2d4 g3f2 f7f5 b7b4"
            }
        },
        "expected": true
    },
    {
        "description": "Knight trade and recapture marked as queen fork",
        "context": {
            "position": "N3r1k1/pp1n1pbp/3Pb1p1/q3n1B1/2p5/5N2/PP2B1PP/R2Q1RK1 b - - 0 17",
            "evaluation": {
                "move": {
                    "from": "e8",
                    "to": "a8"
                },
                "followup": "d1d2 e5f3 f1f3 a5d2 g5d2 e6d5 f3g3 g7b2 a1d1 b2e5 d2g5 e5g3"
            }
        },
        "expected": false
    },
    {
        "description": "Bishop moves to expose pin, winning knight. Only attacks one piece",
        "context": {
            "evaluation": {
                "eval": "4.77",
                "type": "cp",
                "move": {
                    "from": "d4",
                    "to": "e5"
                },
                "followup": "e8c8 e5f6 c6e5 f3e4 e5c4 e4c4 g7g5 g2g3"
            },
            "position": "r3kb1r/1ppq1pp1/p1n2n1p/4p3/2BP4/2N1BQ2/PP3PPP/R3R1K1 w kq - 0 13"
        },
        "expected": false
    },
    {
        "description": "Pawn capture wins but a fork shouldn't be able to fork a piece of the same type",
        "context": {
            "position": "r4rk1/7p/p2p2p1/2pPq3/4Pp2/1P2nPPb/4BR1P/R1QN2K1 b - - 1 25",
            "evaluation": {
                "eval": "-4.48",
                "type": "cp",
                "move": {
                    "from": "f4",
                    "to": "g3"
                },
                "followup": "d1e3 g3f2 g1f2 e5e4 f2g3 e4f4 g3h3 a8e8 a1a4 f4e3 c1e3 e8e3"
            }
        },
        "expected": false
    },
    {
        "description": "Rook 'forks' king and pawn when the rook was previously attacking the pawn",
        "context": {
            "position": "6k1/R4R1p/3p2p1/4r3/8/3Bb2P/2P3K1/1r6 w - - 3 34",
            "evaluation": {
                "move": {
                    "from": "f7",
                    "to": "g7"
                },
                "followup": "g8f8 a7f7 f8e8 f7c7 e8f8 g7h7 f8g8 c7g7 g8f8 g7f7 f8g8 h7g7"
            }
        },
        "expected": false
    },
    {
        "description": "Rook 'forks' two pawns when the rook was previously attacking one of the pawns",
        "context": {
            "position": "5rk1/1R2pp1p/3p2p1/2rP2P1/p4P1b/3B3P/2P4K/5R2 w - - 2 27",
            "evaluation": {
                "move": {
                    "from": "b7",
                    "to": "a7"
                },
                "followup": "c5d5 a7a4 h7h6 g5h6 h4f6 f4f5 g6g5 f1b1 f8c8 h2h1 g8h7 b1b5"
            }
        },
        "expected": false
    },
    {
        "description": "Knight attacks one defended and one undefended pawn",
        "context": {
            "position": "6k1/R7/5pp1/6np/1PK1p3/3N2P1/P2r4/8 w - - 0 42",
            "evaluation": {
                "move": {
                    "from": "d3",
                    "to": "f4"
                },
                "followup": "g5f7 f4d5 f6f5 c4c5 d2c2 c5d4 c2d2"
            }
        },
        "expected": false
    }
]
